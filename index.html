<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Twin City Barns – Fillable PDF Tool</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <img src="logo.png" class="logo" alt="Twin City Barns Logo" />
    <h1>Twin City Barns – Dealer Order Tool</h1>
  </header>
  <main>
    <section>
      <button onclick="loadPDF('cash-sale.pdf')">Load Cash Sale PDF</button>
      <button onclick="loadPDF('rto.pdf')">Load RTO PDF</button>
    </section>

    <iframe id="pdfViewer" src="web/viewer.html?file=cash-sale.pdf" width="100%" height="800" style="border:1px solid #ccc;"></iframe>

    <h2>Draw Layout</h2>
    <iframe src="https://jalon1992.github.io/layout-drawing-tool/" width="1000" height="700" style="border:1px solid #aaa;"></iframe>

    <h2>Buyer Signature</h2>
    <canvas id="signaturePad" width="1000" height="300" style="border:1px solid #000;"></canvas><br>
    <button onclick="clearSignature()">Clear Signature</button>

    <br><br>
    <button onclick="alert('Final PDF export would happen here')">Download Final Combined PDF</button>
  </main>
  <footer>
    <p>For Dealer Use Only – Twin City Barns</p>
  </footer>

  <script>
    function loadPDF(pdfName) {
      document.getElementById('pdfViewer').src = "web/viewer.html?file=" + encodeURIComponent(pdfName);
    }

    const canvas = document.getElementById("signaturePad");
    const ctx = canvas?.getContext("2d");
    let drawing = false;

    canvas.onmousedown = () => {
      drawing = true;
      ctx.beginPath();
    };
    canvas.onmouseup = () => {
      drawing = false;
      ctx.beginPath();
    };
    canvas.onmousemove = (e) => {
      if (drawing) {
        const rect = canvas.getBoundingClientRect();
        ctx.lineWidth = 2;
        ctx.lineCap = "round";
        ctx.strokeStyle = "#000";
        ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
        ctx.stroke();
      }
    };

    function clearSignature() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.beginPath();
    }
  </script>
</body>
</html>
